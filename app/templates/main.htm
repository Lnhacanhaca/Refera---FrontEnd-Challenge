{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refera - FrontEnd PL Code Challenge</title>
    <link rel="stylesheet" href="{%static 'css/style.css' %}">
    <link rel="stylesheet" href="{%static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    

</head>
<body>
    <body class="sb-nav-fixed">
        <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="/">Refera - <span>FrontEnd</span></a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
            
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
                </div>
            </form>

            <!-- Navbar-->
            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Sair</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">Menu</div>
                            <a class="nav-link" href="/">
                                <div class="sb-nav-link-icon"><i class="fas fa-address-book"></i></div>
                                Customer
                            </a>
                            
                           
                            <a class="nav-link" href="{% url 'order_main'%}">
                                <div class="sb-nav-link-icon"><i class="fas fa-sort-amount-up"></i></div>
                                Order
                            </a>
                           
                </nav>
            </div>
            <!--Start Content-->
            

            {% block content%}
            
            {%endblock%}
                
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; Lu√≠s Jorge Nhacanhaca 2022</div>
                            
                        </div>
                    </div>
                </footer>
            </div>
        </div>
   
        <script src="{%static 'js/scripts.js'%}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="{%static 'js/bootstrap.min.js'%}"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/cjs/popper.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
       
       
        <script>
            
            
            //Mask CPF
            function mask_cpf(){
                var cpf =document.getElementById('cpf')
                if(cpf.value.length == 3 || cpf.value.length == 7){
                    cpf.value += "."
                } else if(cpf.value.length == 11){
                    cpf.value += "-"

                }
            }
            //Mask email 
            $(document).ready(function(){
                // set initially button state hidden
                $("#btn").hide();
                // use keyup event on email field
                $("#emailInfo").keyup(function(){
                    if(validateEmail()){
                        // if the email is validated
                        // set input email border green
                        $("#emailInfo").css("border","2px solid green");
                        // and set label 
                        $("#emailMsg").html("<p class='text-success'>Email Validated</p>");
                    }else{
                        // if the email is not validated
                        // set border red
                        $("#emailInfo").css("border","2px solid red");
                        $("#emailMsg").html("<p class='text-danger'>Email Un-validated</p>");
                    }
                    buttonState();
                });
               
            });

            function buttonState(){
                if(validateEmail()){
                    // if email 
                    // then button should show visible
                    $("#btn").show();
                }else{
                    // if both email and pasword are not validated
                    // button state should hidden
                    $("#btn").hide();
                }
            }
        
            
            function validateEmail(){
                // get value of input email
                var email=$("#emailInfo").val();
                // use reular expression
                 var reg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
                 if(reg.test(email)){
                     return true;
                 }else{
                     return false;
                 }
        
            }

            //AJAX button save
            

            //
            $("#btn").click(function(){
                
                var name =$("#firstName").val();
                var cpf =$("#cpf").val();
                var date =$("#picker").val();
                var email =$("#emailInfo").val();
                var phone =$("#phoneNumber").val();

                if (name == '' || cpf == '' || date == '' || email == '' || phone== ''){
                    swal({
                        title: "Fild is Empty!",
                        text: "Please check the missing field",
                        icon: "warning",
                        button: "Ok",
                        
                      });
                }else{
                    
                   
                    swal({
                        title: "Data added successfully",
                        icon: "success",
                        
                        timer: 3000,
                    }), function(){
                        window.location.href  = "{% url 'home' %}";
                    }
                      }
                     
                    
               
                })
                 
            
            
            //Button cancel on customer form end back to list 
                $('#cancel').click(() => {
                    location.href  = "{% url 'home' %}";
                })

                $('#cancelar').click(() => {
                    location.href  = "{% url 'order_main' %}";
                })

               
        </script>
    </body>
</html>